# This is a sample Python script.

# Press ⇧F10 to execute it or replace it with your code.
# Press Double ⇧ to search everywhere for classes, files, tool windows, actions, and settings.

import bs4
from bs4 import BeautifulSoup
import lxml
import requests
import json

url = "https://www.surfcoffee.ru"
req = requests.get(url)

headers = {
    "accept": "*/*",
    "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 11_1_0) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/89.0.4389.114 Safari/537.36"
}

req = requests.get(url, headers=headers)
src = req.text

with open("index.html", "w") as file:
    file.write(src)
# t-menu__link-item
soup = BeautifulSoup(src, "lxml")

all_links = soup.find_all(class_="t-menu__link-item")
all_categories_links = {}


for item in all_links:
    itemText = item.text
    if(item.get("href")[0:4] != "http"):
        itemHREF = "https://www.surfcoffee.ru" + item.get("href")
    else:
        itemHREF = item.get("href")
    all_categories_links[itemText] = itemHREF

with open("all_categories_links_dicts.json", "w") as file:
    json.dump(all_categories_links, file, indent=4, ensure_ascii=False)

with open("all_categories_links_dicts.json") as file:
    all_categories = json.load(file)

for categoryName, categoryHREF in all_categories.items():
    rep = [",", " ", "-"]
    for item in rep:
        if item in categoryName:
            categoryName = categoryName.replace(item, "_")

    req = requests.get(url=categoryHREF, headers=headers)

